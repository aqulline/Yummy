#:import sm kivy.uix.screenmanager
ScreenManager:
    id:manager
    transition:sm.FadeTransition(duration=.2)

    MDScreen:
        name:"fun"
        FitImage:
            source:"bgimages/icons/plain.jpg"

    MDScreen:
        id: test
        name:"one"
        on_enter:
            app.order_spinner2()
            app.keyboard_hooker()
        FitImage:
            source:"bgimages/Home.jpg"
        MDSpinner:
            size_hint: None, None
            size: dp(46), dp(46)
            pos_hint: {'center_x': .5, 'center_y': .5}
            active: app.spin_active
        MDLabel:
            text:app.loading
            halign:"center"
            bold:True
            theme_text_color: "Custom"
            font_style:"Caption"
            text_color:self.theme_cls.primary_color
            size_hint:None, None
            pos_hint: {'center_x': .5, 'center_y': .4}
        MDBoxLayout:
            orientation:"vertical"
            spacing:"10dp"
            MDLabel:
                text:""
                size_hint:None, None
                size: app.size_x/4, "10dp"
            MDTextButton:
                text: "Refresh"
                id:refresh_me
                pos_hint: {"center_x": .9, "center_y": .8}
                custom_color: 40/255, 123/255, 222/255, 1
                on_release:
                    app.refresh_front()
            MDCard:
                md_bg_color: self.theme_cls.primary_color
                size_hint: None, None
                border_radius: 20
                radius: [15]
                border_radius: "12dp"
                size: app.size_x/4, "70dp"
                size_hint_x: .5
                pos_hint: {"center_x": .5, "center_y": .83}
                on_release:
                    manager.current = "other_shops"
                    app.count = app.count + 1
                    app.summon()
                FloatLayout:
                    MDIconButton:
                        icon: "shopping"
                        pos_hint: {"center_x": .5, "center_y": .75}
                    MDLabel:
                        text:"other shops"
                        halign:"center"
                        bold:True
                        pos_hint: {"center_x": .5, "center_y": .3}
            ScrollView:
                id: scroll
                MDGridLayout:
                    cols: 2
                    adaptive_height: True
                    padding: dp(10), dp(4)
                    spacing: dp(30)
                    id:front_shop




    MDScreen:
        name:"selling"
        on_enter:
            app.permision_req()
        FitImage:
            source:"bgimages/icons/plain.jpg"
        FloatLayout:
            MDCard
                id:image_carry
                md_bg_color: self.theme_cls.primary_color
                size_hint: None, None
                border_radius: 20
                radius: [15]
                border_radius: "12dp"
                size: app.size_x - 100, "180dp"
                elevation:3
                pos_hint: {"center_x": .5, "center_y": .8}
                Shop_image:
                    source:app.admin_product_url
            MDCard:
                id:price_carry
                md_bg_color: self.theme_cls.primary_color
                size_hint: None, None
                border_radius: 20
                radius: [15]
                border_radius: "12dp"
                size: app.size_x/3, "80dp"
                elevation:3
                pos_hint: {"center_x": .5, "center_y": .55}
                MDLabel:
                    text:"Price:"
                    halign:"center"
                    bold:True
                    pos_hint: {"center_x": .35, "center_y": .5}
                MDLabel:
                    text:app.admin_product_price
                    halign:"center"
                    bold:True
                    pos_hint: {"center_x": .4, "center_y": .5}
                    elevation: 3
            NumberOnly:
                id:quantity
                size_hint: .4, None
                pos_hint: {"center_x": .5, "center_y": .4}
                height: "30dp"
                hint_text:"idadi"
                color_mode:"custom"
                #theme_text_color: "ContrastParentBackground"
                fill_color: 1, 1, 0, 1
                on_text:
                    app.callculator_rim(quantity.text, app.admin_product_price)
            MDLabel:
                text:"total price" +" "+ app.calculator + "/tsh"
                halign:"center"
                bold:True
                pos_hint: {'center_x': .5, 'center_y': .33}
            MDDropDownItem:
                id:drop_item_one
                md_bg_color:self.theme_cls.primary_color
                pos_hint: {'center_x': .5, 'center_y': .25}
                text: app.menu_text
                on_release:
                    app.callback(drop_item_one)
            MDRoundFlatButton:
                text: "Order"
                pos_hint: {'center_x': .5, 'center_y': .13}
                on_release:
                    app.product_name = app.admin_product_name
                    app.quantity = quantity.text
                    app.phone_number_dialog()

    MDScreen:
        name: "other_shops"
        on_enter:
            app.order_spinner3()
        FitImage:
            source:"bgimages/icons/plain.jpg"
        MDBoxLayout:
            orientation:"vertical"
            MDCard:
                md_bg_color: self.theme_cls.primary_color
                size_hint: None, None
                border_radius: 20
                radius: [15]
                border_radius: "12dp"
                size: app.size_x/.5, "70dp"
                size_hint_x: .5
                pos_hint: {"center_x": .5, "center_y": .85}
                FloatLayout:
                    MDIconButton:
                        icon: "shopping"
                        pos_hint: {"center_x": .5, "center_y": .75}
                    MDLabel:
                        text:"Shop anything!"
                        halign:"center"
                        bold:True
                        pos_hint: {"center_x": .5, "center_y": .3}
            ScrollView:
                id: scroll
                MDGridLayout:
                    cols: 2
                    adaptive_height: True
                    padding: dp(4), dp(4)
                    spacing: dp(10)
                    id:other_shop

        MDSpinner:
            size_hint: None, None
            size: dp(46), dp(46)
            pos_hint: {'center_x': .5, 'center_y': .5}
            active: app.spin_active

    MDScreen:
        name:"login"
        md_bg_color:60/255, 66/255, 75/255, 1
        FloatLayout:
            orientation:"vertical"
            NumberOnlyRound:
                id:user_login_phone
                pos_hint:{"center_x":.5, "center_y":.6}
                size_hint: .8,.054
                hint_text:"Phone:"
                line_color :app.theme_cls.primary_color
                normal_color: 0.5,0.5,0.5,0.5
                icon_left:"phone"
                color_active:1, 1, 1, 1
                icon_left_color:app.theme_cls.primary_color
            MDTextFieldRound:
                id:user_login_password
                pos_hint:{"center_x":.5, "center_y":.48}
                size_hint: .8,.054
                hint_text:"password:"
                password:True
                line_color:app.theme_cls.primary_color
                normal_color: 0.5,0.5,0.5,0.5
                icon_left:"lock"
                icon_left_color:app.theme_cls.primary_color
                color_active:1, 1, 1, 1
            MDSpinner:
                size_hint: None, None
                size: dp(46), dp(46)
                pos_hint: {'center_x': .5, 'center_y': .5}
                active: app.spin_active
            MDFillRoundFlatButton:
                text:"Login"
                size_hint: .7, .07
                pos_hint:{"center_x":.5, "center_y":.38}
                text_color:1, 1, 1, 1
                on_release:
                    app.validate_user(user_login_phone.text, user_login_password.text)
    MDScreen:
        name:"admin_main"
        md_bg_color:60/255, 66/255, 75/255, 1
        on_enter:
            app.add_order()
        MDBottomNavigation:
            panel_color: .2, .2, .2, 1
            text_color_active: 1, 0, 1, 1
            MDBottomNavigationItem:
                name: 'orders'
                text: 'Orders'
                icon: 'reorder-horizontal'
                MDBoxLayout:
                    orientation:"vertical"
                    ScrollView:
                        id: scroll
                        MDGridLayout:
                            cols: 1
                            adaptive_height: True
                            padding: dp(4), dp(4)
                            spacing: dp(10)
                            id:food_cat
                MDCard:
                    orientation:"vertical"
                    spacing: "1dp"
                    id:order
                    md_bg_color:245 / 255, 0 / 255, 72 / 255, 1
                    size_hint: None, None
                    border_radius: 20
                    radius: [15]
                    border_radius: "12dp"
                    size: 155, "70dp"
                    pos_hint: {"center_x": .5, "center_y": .9}
                    on_release:
                        app.refresh()
                    MDLabel:
                        text:"O r d e r s"
                        halign:"center"
                        pos_hint: {"center_x": .5, "center_y": .5}
                        bold:True
                    MDLabel:
                        halign:"center"
                        text:"(" + app.order_number + ")"
                        bold:True
            MDBottomNavigationItem:
                name: 'add_product'
                text: 'Products'
                icon: 'food'
                name:"product_detail"
                FitImage:
                    source:"bgimages/icons/plain.jpg"
                FloatLayout:
                    orientation:"vertical"
                    ScrollView:
                        MDGridLayout:
                            cols: 1
                            adaptive_height: True
                            padding: dp(9), dp(5)
                            spacing: dp(15)
                            MDCard:
                                size_hint: None, None
                                size: app.size_x - 15, "180dp"
                                padding: dp(10), dp(5)
                                pos_hint: {"center_x": 1, "center_y": .8}
                                elevation:"0"
                                on_release:
                                    app.Permission()
                                AsyncImage:
                                    id:product_image
                                    source: app.admin_product_image
                                    size: self.texture_size
                                    allow_stretch: False
                                    keep_ratio: False
                            MDTextField:
                                id:product_name
                                hint_text: "Product name:"
                                helper_text: "Example: juice"
                                helper_text_mode: "persistent"
                            NumberOnlyField:
                                id:product_amount
                                hint_text: "Product price:"
                                helper_text: "Example:100"
                                helper_text_mode: "persistent"
                            MDTextField:
                                id:customer_name
                                hint_text: "Admin name:"
                                helper_text: "Example:peter"
                                helper_text_mode: "persistent"
                            MDTextField:
                                id:customer_password
                                hint_text: "Password:"
                                helper_text_mode: "persistent"
                            NumberOnlyField:
                                id:customer_phone
                                hint_text: "Admin phone:"
                                helper_text: "Example:07xxx or 06xxxx"
                                helper_text_mode: "persistent"
                            NumberOnlyField:
                                id:customer_phone_o
                                hint_text: "Other phone:"
                                helper_text: "Example:07xxx or 06xxxx"
                                helper_text_mode: "persistent"
                            MDTextField:
                                id:category
                                hint_text: "Category"
                                helper_text: "category is admin or customer"
                                helper_text_mode: "persistent"
                            MDLabel:
                                text:""
                                halign:"center"
                            MDFillRoundFlatButton:
                                text:"SUBMIT"
                                text_color: 1, 1, 1, 1
                                pos_hint: {'center_x': 1, 'center_y': .2}
                                size_hint_x: .7
                                on_release:
                                    app.spin_active = True
                                    app.get_info(customer_phone.text, customer_phone_o.text, customer_name.text, product_amount.text, product_name.text, product_image.source, customer_password.text, category.text)
                    MDSpinner:
                        size_hint: None, None
                        size: dp(46), dp(46)
                        pos_hint: {'center_x': .5, 'center_y': .5}
                        active: app.spin_active
            MDBottomNavigationItem:
                name: 'admin_info'
                text: 'Admins'
                icon: 'account-box'

<phone_dialog>
    NumberOnlyField:
        id:phone
        hint_text:"Phone number:"
        size_hint: .8, None
        pos_hint_x: .2
        color_mode:"accent"
        text_color: 0, 0, 0, 0
        on_text:
            app.phone_number = phone.text

<last_dialog>
    orientation:"vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "120dp"
    MDLabel:
        text:"[color=FF7646]Phone number:[/color]"+" "+app.phone_number
        theme_text_color:"Custom"
        text_color:	121/255, 174/255, 141/255, 1
        markup: True
    MDLabel:
        text:"[color=FF7646]Location:[/color]"+" "+app.location
        theme_text_color:"Custom"
        text_color:	121/255, 174/255, 141/255, 1
        markup: True
    MDLabel:
        text:"[color=FF7646]Product name:[/color]"+" "+app.product_name
        theme_text_color:"Custom"
        text_color:	121/255, 174/255, 141/255, 1
        markup: True
    MDLabel:
        text:"[color=FF7646]Quantity:[/color]"+" "+app.quantity
        theme_text_color:"Custom"
        text_color:	121/255, 174/255, 141/255, 1
        markup: True
    MDLabel:
        text:"[color=FF7646]Total amount:[/color]"+" "+str(app.total_amount)
        theme_text_color:"Custom"
        text_color:	121/255, 174/255, 141/255, 1
        markup: True

<category>:
    orientation: "vertical"
    padding: "8dp"
    spacing: "10dp"
    border_radius: 20
    border_color: 1
    radius: [15]
    size_hint: None, None
    size: app.size_x - 15, app.size_y/2
    focus_behavior: False
    ripple_behavior: True
    elevation: "6"

<Shops>:
    orientation: "vertical"
    padding: "10dp"
    spacing: "5dp"
    border_radius: 20
    border_color: 1
    radius: [15]
    size_hint: None, None
    size: app.size_x/2.2, app.size_y/2.5
    focus_behavior: False
    ripple_behavior: True
    elevation: "6"

<Front_shop>:
    md_bg_color: self.theme_cls.primary_color
    size_hint: None, None
    border_radius: 20
    radius: [15]
    border_radius: "12dp"
    size: app.size_x/3, "100dp"
    size_hint_x: .5
    elevation: 1
<Cool>:
    size_hint: None, None
    size: "50dp", "50dp"
    pos_hint: {"center_x": .5, "center_y": .7}

<category_gal>:
    orientation: "vertical"
    padding: "8dp"
    spacing: "10dp"
    border_radius: 20
    border_color: 1
    radius: [15]
    size_hint: None, None
    size: app.size_x - 15, "250dp"
    focus_behavior: False
    ripple_behavior: True
    elevation: "6"

<Labels>:
    text: "Title"
    theme_text_color: "Custom"
    #text_color: 230/255, 150/255, 11/255
    size_hint_y: None
    height: self.texture_size[1]
    font_style:"Body1"
    bold: True

<MyTile@SmartTileWithLabel>
    size_hint_y: None
    height: "240dp"

<Check@MDCheckbox>:
    group: 'group'
    size_hint: None, None
    size: dp(48), dp(48)

